(window.webpackJsonpcm_front=window.webpackJsonpcm_front||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n.p+"static/media/VIPAlarm.d3e7bccd.mp3"},function(e,t,n){e.exports=n(29)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),l=n.n(c),i=(n(12),n(1)),o=n(3),s=(n(13),n(14),n(15),function(e){var t=e.agent,n=e.size,a=e.censor,c=new Date(1e3*t.Duration).toISOString().substr(11,8),l="biggest"===n?30:12,i=a?t.AgentFirstName:t.AgentName.substr(0,l);return r.a.createElement("div",{className:"agent",id:t.status},r.a.createElement("div",{className:"agent-name"},i),r.a.createElement("div",{className:"agent-status"},c," ",t.Reason))}),u=function(e){var t,n=e.agents,a=e.censor,c=(t=n.length)<5?"biggest":t<11?"big":"normal",l=n.map(function(e,t){return r.a.createElement(s,{key:t,agent:e,size:c,censor:a})});return r.a.createElement("div",{className:"agent-grid ".concat(c),id:"content"},l)},m=(n(16),function(e){var t=e.idStatus,n=e.idNumber,a=e.status,c=e.count;return r.a.createElement("div",{className:"agent-count"},r.a.createElement("div",{className:"status",id:t},a),r.a.createElement("div",{className:"number",id:n},c))}),d=function(e){var t=e.statusCount;return r.a.createElement("div",{className:"agent-header"},r.a.createElement(m,{idStatus:"center",idNumber:"left",status:"FREE: ",count:t.free}),r.a.createElement(m,{idStatus:"center",idNumber:"left",status:"CALL: ",count:t.call}),r.a.createElement(m,{idStatus:"center",idNumber:"left",status:"BUSY: ",count:t.busy}),r.a.createElement(m,{idStatus:"center",idNumber:"left",status:"TOTAL: ",count:t.total}))},v=["J\xc4LKIKIRJAUS","PUHELU (Sis\xe4\xe4n)","PUHELU (Ulos)","S\xc4HK\xd6POSTI (Sis\xe4\xe4n)","S\xc4HK\xd6POSTI (Ulos)","WRAPUP TIME","CALL (In)","CALL (Out)"],E=["Login","Sis\xe4\xe4nkirjaus"],f=function(e){var t=e.agents,n=e.censor,a=E,c=v,l=t.reduce(function(e,t){return e.total++,a.includes(t.Reason)?(e.free++,t.status="free",e):c.includes(t.Reason)?(e.call++,t.status="call",e):(t.status="busy",e.busy++,e)},{free:0,call:0,busy:0,total:0}),i=0!==t.length?"":"NO AGENTS ONLINE";return r.a.createElement("div",{id:"agent-section"},r.a.createElement("div",{id:"agent-container"},r.a.createElement(d,{statusCount:l}),r.a.createElement("div",{id:"agent-list"},r.a.createElement(u,{agents:t,censor:n}),r.a.createElement("div",{id:"agent-background"},i))))},g=(n(17),n(18),function(e){var t=e.item,n=t.MaxQueueTime,a=Math.floor(n/3600),c=Math.floor(n/60)-60*a,l=n-60*c-3600*a,i="PBX"===t.ContactType?function(e){return e<120?"green":e<600?"yellow":"red"}(n):"email";return r.a.createElement("div",{className:"queue-row"},r.a.createElement("div",{className:"service-name"},t.ServiceName),r.a.createElement("div",{className:"service-channel",id:i},"PBX"===t.ContactType?"CALL":t.ContactType),r.a.createElement("div",{className:"service-length",id:i},t.QueueLength),r.a.createElement("div",{className:"service-time",id:i},a<10?"0".concat(a):a,":",c<10?"0".concat(c):c,":",l<10?"0".concat(l):l))}),S=(n(19),n(6)),h=n.n(S),b=function(e){var t=e.startTime,n=Object(a.useState)(t),c=Object(i.a)(n,2),l=c[0],o=c[1];if(Object(a.useEffect)(function(){setTimeout(function(){o(l+1)},1e3)},[l]),l>20){var s=new Date(1e3*(l-20)).toISOString().substr(11,8);return r.a.createElement("div",{className:"timer red"},"-",s)}var u=new Date(1e3*(20-l)).toISOString().substr(11,8);return r.a.createElement("div",{className:"timer blue"},u)},A=function(e){e.count;var t=e.callShown,n=Object(a.useState)("alarm-yellow"),c=Object(i.a)(n,2),l=c[0],o=c[1],s="alarm-yellow"!==l?"alarm-yellow":"alarm-white";return Object(a.useEffect)(function(){setTimeout(function(){o(s)},1e3)},[s]),r.a.createElement("div",{className:"vip-alarm-modal ".concat(l)},r.a.createElement("audio",{src:h.a,autoPlay:!0,loop:!0}),r.a.createElement("div",null,"VIP CALL"),r.a.createElement("div",{className:"call-name"},t.ServiceName),r.a.createElement(b,{startTime:t.MaxQueueTime}))},O=function(e){var t=e.vipCalls;if(0===t.length)return null;var n=t.length,a=t[0];return r.a.createElement(A,{count:n,callShown:a})},p=(n(20),function(){return r.a.createElement("div",{className:"medium-alarm-header"},r.a.createElement("div",null,"MEDIUM ALARM CALLS:"))}),N=function(e){var t=e.ServiceName,n=e.MaxQueueTime,a=new Date(1e3*n).toISOString().substr(11,8),c="";return c=t.length>14?t.substr(0,14)+"...":t,r.a.createElement("div",{className:"medium-alarm-row"},r.a.createElement("div",null,c),r.a.createElement("div",null),r.a.createElement("div",null,a))},w=function(e){var t=e.mediumAlarmCalls.map(function(e,t){return r.a.createElement(N,{key:t,ServiceName:e.ServiceName,MaxQueueTime:e.MaxQueueTime})});return r.a.createElement("div",{className:"medium-alarm-modal"},r.a.createElement(p,null),t)},T=function(e){var t=e.mediumAlarmCalls;return 0===t.length?null:r.a.createElement(w,{mediumAlarmCalls:t})},I=(n(21),function(){return r.a.createElement("div",{id:"queue-header"},r.a.createElement("div",{id:"header-name"},"SERVICE NAME"),r.a.createElement("div",{id:"header-channel"},"TYPE"),r.a.createElement("div",{id:"header-length"},"#"),r.a.createElement("div",{id:"header-time"},"WAIT"))}),y=function(e,t){return e.MaxQueueTime<t.MaxQueueTime?1:e.MaxQueueTime>t.MaxQueueTime?-1:0},L=function(e){return e.map(function(e,t){return r.a.createElement(g,{key:t,item:e})})},P=function(e){var t=e.text;return r.a.createElement("div",{className:"list-background"},t)},C=function(e){var t=e.queue,n=e.activeAlarms,a=[],c=[];t&&(a=t.filter(function(e){return"PBX"!==e.ContactType}).sort(y),c=t.filter(function(e){return"PBX"===e.ContactType}).sort(y));var l=0!==a.length?null:r.a.createElement(P,{text:"NO EMAILS"}),i=0!==c.length?null:r.a.createElement(P,{text:"NO CALLS"}),o=c.filter(function(e){return 1===n[e.ServiceId]}),s=c.filter(function(e){return 2===n[e.ServiceId]});return r.a.createElement("div",{id:"queue-section"},r.a.createElement("div",{id:"queue-container"},r.a.createElement(I,null),r.a.createElement("div",{id:"call-list"},i||L(c)),r.a.createElement("div",{id:"email-list"},l||L(a)),r.a.createElement(T,{mediumAlarmCalls:o}),r.a.createElement(O,{vipCalls:s})))};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var M={showQueue:!0,showAgents:!0,gridStyle:"50% 50%"},R=function(e,t,n){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach(function(t){Object(o.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t);a[e]=!a[e],a.showQueue&&a.showAgents?a.gridStyle="50% 50%":a.gridStyle="100%";try{window.localStorage.setItem("dashboardColumns",JSON.stringify(a)),n(a)}catch(r){console.log("Dashboard switch failure"),window.localStorage.removeItem("dashboardColumns"),n(M)}},U=function(e){var t=e.queue,n=e.activeAlarms,c=e.agents,l=e.censor,o=Object(a.useState)(function(){var e=localStorage.getItem("dashboardColumns");if(e)try{return JSON.parse(e)}catch(t){return console.log("Dashboard switch failure"),window.localStorage.removeItem("dashboardColumns"),M}return M}()),s=Object(i.a)(o,2),u=s[0],m=s[1],d=function(e){return e?"shown":"not-shown"},v={"--grid-columns":u.gridStyle},E=u.showQueue?"HIDE QUEUE":"SHOW QUEUE",g=u.showAgents?"HIDE AGENTS":"SHOW AGENTS";return r.a.createElement("div",{id:"dashboard",style:v},r.a.createElement("div",{id:"dashboard-options"},r.a.createElement("div",{id:"dashboard-options-modal"},r.a.createElement("button",{className:d(u.showQueue),onClick:function(){return R("showQueue",u,m)}},E),r.a.createElement("button",{className:d(u.showAgents),onClick:function(){return R("showAgents",u,m)}},g))),u.showQueue&&r.a.createElement(C,{queue:t,activeAlarms:n}),u.showAgents&&r.a.createElement(f,{agents:c,censor:l}))},D=n(2),k=function(e,t){var n=e.reduce(function(e,n){return t.includes(n.ServiceId)&&(e.Answered+=n.ProcessedPieces,e.Received+=n.ContactsPieces),e},{Answered:0,Received:0}),a="".concat(n.Answered,"/").concat(n.Received),r="".concat(Math.round(n.Answered/n.Received*100)," %");return{stats:a,ratio:"NaN %"!==r?r:"100 %"}},Q=function(e,t,n){var a=function(e){var t="ALL TEAMS"!==e?"ALL ".concat(e):"ALL TEAMS";return n.find(function(e){return e.AgentName===t}).ServiceIds};if(t.includes("ALL TEAMS"))return k(e,a("ALL TEAMS"));var r=[];return t.forEach(function(e){var t=a(e);r.push.apply(r,Object(D.a)(t))}),k(e,r)},x=(n(22),function(e){var t=e.type,n=e.stats;return r.a.createElement("div",{className:"stats-count"},r.a.createElement("div",null,t,": ",n.stats),r.a.createElement("div",null,n.ratio))}),F=function(e){e.type;var t=e.name,n=e.statsPBX,a=e.statsEmail;return r.a.createElement("div",{className:"stats-row"},r.a.createElement("div",null,t),r.a.createElement(x,{type:"Calls",stats:n}),r.a.createElement(x,{type:"Emails",stats:a}))},H=function(e){var t=e.activeTeamProfiles,n=e.activeTeam,a=e.teams,c=e.report,l="NONE",i="0/0",o="0/0";return 0!==a.length&&c&&0!==c.reportPBX.length&&0!==t.length&&(i=Q(c.reportPBX,n,t),o=Q(c.reportEmail,n,t),l=n.length>1?"".concat(n[0]," +").concat(n.length-1):n[0]),r.a.createElement("div",{className:"statistics"},r.a.createElement(F,{type:"Team",name:l,statsPBX:i,statsEmail:o}))},B=(n(23),function(e,t){return 0===t.length||0===e.length?[]:t.find(function(e){return"ALL TEAMS"===e.TeamName}).Profiles.filter(function(t){return e.includes(t.AgentId)})}),V=function(e,t){if(0===t.length||0===e.length)return[];return B(e,t).reduce(function(e,t){return[].concat(Object(D.a)(e),Object(D.a)(t.ServiceIds))},[])},q=function(e,t){return 0===e.length||0===t.length?[]:e.filter(function(e){return t.includes(e.ServiceId)})},J=function(e,t){var n=t[e];return void 0===n?0:n},X=q,G=function(e,t){var n=[];return e.forEach(function(e){var a;n.push.apply(n,Object(D.a)((a=e,0===t.length?[]:t.find(function(e){return e.TeamName===a}).Profiles)))}),n},_=V,W=B,K=function(e,t,n){var a=V(t,n);return e.filter(function(e){return a.includes(e.ServiceId)})},Y=function(e,t){return t.includes("ALL TEAMS")?e:e.filter(function(e){return t.includes(e.Team)})},z=function(e){var t=e.list,n=e.column,c=e.type,l=e.header,o=Object(a.useState)(""),s=Object(i.a)(o,2),u=s[0],m=s[1],d=t?t.filter(function(e){return e.props.children.toLowerCase().includes(u.toLowerCase())}):t,v={gridColumn:n};return r.a.createElement("div",{className:"modal-list",style:v},r.a.createElement("div",{className:"modal-title"},r.a.createElement("h3",null,c),r.a.createElement("h3",null,l),"Search: ",r.a.createElement("input",{value:u,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{className:"modal-search"},d))},Z=function(e){var t=e.activeTeamProfiles,n=e.activeTeam,a=e.teamsList,c=e.changeTeam,l=e.activeProfileId,i=e.changeProfile,o=e.showModal,s=W(l,a),u=a?a.map(function(e,t){return r.a.createElement("button",{className:(a=e.TeamName,n.includes(a)?"Selected":"Unselected"),key:t,onClick:function(){return c(e.TeamName)}},e.TeamName);var a}):[],m=function(e){return l.includes(e.AgentId)?"Selected":"Unselected"},d=function(e,t){return e.sort(function(e,n){return t.includes(e.AgentId)?-1:t.includes(n.AgentId)?1:"ALL TEAMS"===e.AgentName?-1:"ALL TEAMS"===n.AgentName?1:e.AgentName<n.AgentName?-1:1})}(t,l).map(function(e,t){return r.a.createElement("button",{className:m(e),key:t,onClick:function(){return i(e.AgentId)}},e.AgentName)}),v=o?"show":"hide",E=0===n.length?"NONE":n.length>1?"".concat(n[0]," +").concat(n.length-1):n[0],f=0===s.length?"NONE":s.length>1?"".concat(s[0].AgentName," +").concat(s.length):s[0].AgentName;return r.a.createElement("div",{className:"modal-box",id:v},r.a.createElement(z,{list:u,column:1,type:"TEAM:",header:E}),r.a.createElement(z,{list:d,column:2,type:"PROFILE:",header:f}))},$=(n(24),function(e){var t=e.showHelp?"show":"hide",n=window.localStorage.getItem("serverVersion");return r.a.createElement("div",{className:"help-modal",id:t},r.a.createElement("p",null,r.a.createElement("b",null,"VERSION: ",n)),r.a.createElement("p",null,r.a.createElement("b",null,' "CHOOSE FILTERS"')," button:",r.a.createElement("br",null),"- Use it to select different filters for the CALL and EMAIL queues, and the Agents shown.",r.a.createElement("br",null),"- Selected PROFILE's determine the QUEUE filter.",r.a.createElement("br",null),"- Selected TEAM's determine the AGENT filter.",r.a.createElement("br",null),"Filter selection clarity will be improved in future."),r.a.createElement("p",null,r.a.createElement("b",null,'"REMOVE FILTERS"')," button:",r.a.createElement("br",null),"- Use it to remove all selected filters."),r.a.createElement("p",null,r.a.createElement("b",null,'"SERVICE ALARMS"')," button:",r.a.createElement("br",null),'- Shows all active service channels. Your "CHOOSE FILTERS" --\x3e PROFILE\'s determine these.',r.a.createElement("br",null),"- All services shown here will be shown in QUEUE if an email or call comes from it.",r.a.createElement("br",null),r.a.createElement("br",null),"You can choose the alarm level of the CALLS of each service (emails not affected).",r.a.createElement("br",null),"- NORMAL alarm is the default level - it is shown only in CALL section.",r.a.createElement("br",null),"- MEDIUM alarm will show the call as a separate larger RED box.",r.a.createElement("br",null),"- VIP alarm will trigger a screen wide flasing display with 20 second countdown and sound alarm.",r.a.createElement("br",null),r.a.createElement("i",null,"*NOTE for sound to work you need to allow autoplay in browser/click it once/use Chrome for less issues")),r.a.createElement("p",null,r.a.createElement("b",null,' "CENSOR"')," button:",r.a.createElement("br",null),"- Hides shows only 1st letter of Service Names and hides lastnames of Agents."),r.a.createElement("p",null,r.a.createElement("b",null,'"ERROR MESSAGE/LIGHT"'),":",r.a.createElement("br",null),"- The status light is green when connection is good and everything is working.",r.a.createElement("br",null),"- The status light is yellow when the browser cannot connect to the server. Either you need to change your connection or the server is down.",r.a.createElement("br",null),"- The status light is red when the server cannot connect to the database. Contact admin."),r.a.createElement("p",null,r.a.createElement("b",null,'"SHOW/HIDE QUEUE or AGENTS"')," dashboards:",r.a.createElement("br",null),"- Hover over top center.",r.a.createElement("br",null),"- Click the buttons"))}),ee=(n(25),function(e){var t=e.error,n=200===t.status?"green":503===t.status?"yellow":"red",a="",c="Connection normal";return 200!==t.status&&(a="CONNECTION PROBLEMS",503===t.status&&(c="Server connection problems!"),502===t.status&&(c="Database connection problems!")),r.a.createElement("div",{className:"error-board"},r.a.createElement("div",{className:"error-status"},r.a.createElement("button",{id:n}),r.a.createElement("div",{className:"error-explain",id:"message".concat(n)},"Connection status: ",t.status,r.a.createElement("br",null),c)),r.a.createElement("div",{className:"error-message",id:"message".concat(n)},a))});n(26);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach(function(t){Object(o.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ae=function(e){var t=e.ServiceAlarmType,n=e.changeAlarmsButtonFunc,a=function(e){var t={0:"Unselected",1:"Unselected",2:"Unselected"};return t[e]="Selected",t}(t);return r.a.createElement("div",null,r.a.createElement("button",{className:a[0],onClick:function(){n(0)}},"Normal Alarm"),r.a.createElement("button",{className:a[1],onClick:function(){n(1)}},"Medium Alarm"),r.a.createElement("button",{className:a[2],onClick:function(){n(2)}},"VIP Alarm"))},re=function(e){var t=e.ServiceName,n=e.ServiceId,a=e.ServiceAlarmType,c=e.activeAlarms,l=e.setActiveAlarms;return r.a.createElement("div",{className:"service-modal-item"},r.a.createElement("div",null,t," "),r.a.createElement("div",null,n," "),r.a.createElement("div",null),r.a.createElement(ae,{ServiceAlarmType:a,changeAlarmsButtonFunc:function(e){return function(e,t,n,a){var r=function(e,t,n){return 0===t?(delete n[e],ne({},n)):(n[e]=t,ne({},n))}(e,t,n);window.localStorage.setItem("activeAlarms",JSON.stringify(r)),a(r)}(n,e,c,l)}}))},ce=function(e){var t=e.completeActiveServices,n=e.activeAlarms,c=e.setActiveAlarms,l=Object(a.useState)(""),o=Object(i.a)(l,2),s=o[0],u=o[1],m=(0===t.length?[]:t.filter(function(e){return t=e.ServiceName,n=s,t.toLocaleLowerCase().includes(n.toLocaleLowerCase());var t,n})).map(function(e,t){return r.a.createElement(re,{key:t,ServiceName:e.ServiceName,ServiceId:e.ServiceId,ServiceAlarmType:e.AlarmType,activeAlarms:n,setActiveAlarms:c})});return r.a.createElement("div",{id:"service-modal-list"},r.a.createElement("div",{id:"service-modal-title"},r.a.createElement("h3",null,"Choose services alarm type - all active service shown"),"Search: ",r.a.createElement("input",{value:s,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",{id:"service-modal-search"},r.a.createElement("div",{className:"service-modal-item"},r.a.createElement("div",null,"Service Name "),r.a.createElement("div",null,"Service ID "),r.a.createElement("div",null),r.a.createElement("div",null,"ALARM TYPES")),m))},le=function(e){var t=e.services,n=e.showModal,a=e.activeServiceIds,c=e.activeAlarms,l=e.setActiveAlarms;if(!n)return null;var i=function(e,t){var n=[];return e.forEach(function(e){var a={ServiceName:e.ServiceName,ServiceId:e.ServiceId,AlarmType:J(e.ServiceId,t)};n.push(a)}),n}(X(t,a),c),o=n?"show":"hide";return r.a.createElement("div",{id:"service-modal-box",className:o},r.a.createElement(ce,{completeActiveServices:i,activeAlarms:c,setActiveAlarms:l}))},ie=(n(27),function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(a.useState)(!1),v=Object(i.a)(d,2),E=v[0],f=v[1],g=e.activeTeam,S=e.teams,h=e.changeTeam,b=e.activeProfileId,A=e.changeProfile,O=e.services,p=e.censor,N=e.setCensor,w=e.connectionStatus,T=e.activeAlarms,I=e.setActiveAlarms,y=e.report,L=function(e){return e?"Selected":"Unselected"},P=p?"On":"OFF",C=G(g,S),j=_(b,S);return r.a.createElement("div",{id:"options-section"},r.a.createElement(Z,{activeTeamProfiles:C,activeTeam:g,teamsList:S,changeTeam:h,activeProfileId:b,changeProfile:A,showModal:c}),r.a.createElement($,{showHelp:u}),r.a.createElement(le,{services:O,showModal:E,activeServiceIds:j,activeAlarms:T,setActiveAlarms:I}),r.a.createElement("div",{id:"option-buttons-container"},r.a.createElement("button",{className:L(c),onClick:function(){return l(!c)}},"CHOOSE FILTERS"),r.a.createElement("button",{className:"Unselected",onClick:function(){h("")}},"REMOVE FILTERS"),r.a.createElement("button",{className:L(E),onClick:function(){return f(!E)}},"SERVICE ALARMS"),r.a.createElement("button",{className:L(p),onClick:N},"CENSOR: ",P),r.a.createElement("button",{className:L(u),onClick:function(){return m(!u)}},"HELP"),r.a.createElement(ee,{error:w})),r.a.createElement(H,{activeTeamProfiles:C,activeTeam:g,teams:S,report:y}))});Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BACKEND_ORIGIN;var oe="".concat("./api","/push"),se=function(){return new EventSource("".concat(oe,"/dataUpdates"))},ue=function(){return new EventSource("".concat(oe,"/teamUpdates"))},me=(n(28),function(){var e=window.localStorage.getItem("activeProfileId");return e?e.split(",").map(function(e){return parseInt(e)}):[]}),de=function(){var e=window.localStorage.getItem("activeTeam");return e?e.split(","):[]},ve=function(){var e=window.localStorage.getItem("activeAlarms");return void 0!==e&&e?JSON.parse(e):{}},Ee=function(){var e=Object(a.useState)(de),t=Object(i.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(me),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(a.useState)(ve),d=Object(i.a)(m,2),v=d[0],E=d[1],f=Object(a.useState)(!1),g=Object(i.a)(f,2),S=g[0],h=g[1],b=Object(a.useState)([]),A=Object(i.a)(b,2),O=A[0],p=A[1],N=Object(a.useState)([]),w=Object(i.a)(N,2),T=w[0],I=w[1],y=Object(a.useState)([]),L=Object(i.a)(y,2),P=L[0],C=L[1],j=Object(a.useState)(""),M=Object(i.a)(j,2),R=M[0],k=M[1],Q=Object(a.useState)([]),x=Object(i.a)(Q,2),F=x[0],H=x[1],B=Object(a.useState)({status:200,errorStart:""}),V=Object(i.a)(B,2),q=V[0],J=V[1],X=Object(a.useState)(200),G=Object(i.a)(X,2),_=G[0],W=G[1];Object(a.useEffect)(function(){!function(e,t,n){t.status!==e&&n({status:e,time:(new Date).toISOString()})}(_,q,J)},[_,q]),Object(a.useEffect)(function(){!function e(t,n){var a=ue();a.onopen=function(e){var t=(new Date).toISOString().substr(11,8);console.log("teamUpdates OPEN:",t)},a.onerror=function(r){var c=(new Date).toISOString().substr(11,8);console.log("teamUpdates ERROR: ",c),a.close(),setTimeout(function(){return e(t,n)},1e4)},a.onmessage=function(e){var a=JSON.parse(e.data);if(200===a.status){var r=window.localStorage.getItem("serverVersion");r&&r!==a.serverVersion&&(console.log("New version available",a.serverVersion,"old version:",r),setTimeout(function(){window.location.reload(!0)},5e3)),window.localStorage.setItem("serverVersion",a.serverVersion),t(a.teams),n(a.services)}else{var c=(new Date).toISOString().substr(11,8);console.log("TEAM UPDATE FAILED",a.status,c)}}}(C,H),function e(t,n,a,r){var c=se();c.onopen=function(e){var t=(new Date).toISOString().substr(11,8);console.log("dataUpdates OPEN:",t)},c.onerror=function(l){var i=(new Date).toISOString().substr(11,8);console.log("dataUpdates ERROR: ",i),r(503),c.close(),setTimeout(function(){return e(t,n,a,r)},1e4)},c.onmessage=function(e){var c=JSON.parse(e.data);if(200!==c.status){var l=(new Date).toISOString();return r(c.status),void console.log("TEAM UPDATE FAILED",c.status,l)}var i={reportPBX:c.reportPBX,reportEmail:c.reportEmail};t(c.queue),n(c.agentsOnline),a(i),r(200)}}(p,I,k,W)},[]);var z=function(e,t,n,a){if(!t||0===t.length||0===e.length||0===a.length)return[];try{var r=Y(t,e).sort(function(e,t){return e.AgentName<t.AgentName?-1:1});return n?function(e,t){return e.forEach(function(e){var n=t.find(function(t){return t.AgentId===e.AgentId});e.AgentFirstName=n.AgentFirstName}),e}(r,a.find(function(e){return"ALL TEAMS"===e.TeamName}).Profiles):r}catch(c){return console.log("a",e,"b",t,"c",n,"d",a),console.error("Wild AgentSorting error",c),[]}}(n,T,S,P),Z=function(e,t,n,a){try{if(0===t.length||0===e.length||0===n.length)return[];var r=K(e,t,n);return a?function(e){var t=[];return e.forEach(function(e){var n,a={ServiceId:e.ServiceId,ServiceName:(n=e.ServiceName,n[0]),ContactType:e.ContactType,MaxQueueTime:e.MaxQueueTime,QueueLength:e.QueueLength};t.push(a)}),t}(r):r}catch(c){return console.error("QueueProfile error:",t,c),e}}(O,s,P,S),$=function(e){return function(e,t,n){var a=function(e){window.localStorage.setItem("activeProfileId",e.toString()),n(e)};if(""!==e){if(t.includes(1))return 1===e?void a([]):void a([e]);if(1!==e)a(t.includes(e)?t.filter(function(t){return t!==e}):[].concat(Object(D.a)(t),[e]));else a([e])}else a([])}(e,s,u)};return r.a.createElement("div",{id:"main"},r.a.createElement(U,{queue:Z,activeAlarms:v,agents:z,censor:S}),r.a.createElement(ie,{activeTeam:n,teams:P,changeTeam:function(e){return function(e,t,n,a){var r=function(e){window.localStorage.setItem("activeTeam",e.toString()),n(e)};if(""===e)return a(""),void r([]);if(t.includes("ALL TEAMS"))return"ALL TEAMS"===e?void r([]):void r([e]);"ALL TEAMS"!==e?r(t.includes(e)?t.filter(function(t){return t!==e}):[].concat(Object(D.a)(t),[e])):r([e])}(e,n,c,$)},activeProfileId:s,changeProfile:$,services:F,censor:S,setCensor:function(){return h(!S)},report:R,connectionStatus:q,activeAlarms:v,setActiveAlarms:E}))};l.a.render(r.a.createElement(Ee,null),document.getElementById("root"))}],[[7,1,2]]]);
//# sourceMappingURL=main.07ab23d8.chunk.js.map